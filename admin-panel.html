<!doctype html><html lang='pt-br'><head><meta charset='utf-8'/><meta name='viewport' content='width=device-width,initial-scale=1'/>
<title>Painel Admin</title><link rel='stylesheet' href='style.css'></head><body>
<div class='header'><div class='logo'>Painel Admin</div></div><main class='container'>
<div class='card'><h3>Adicionar/Editar Usuário (30d)</h3>
<form id='addUserForm'><input id='addUserId' placeholder='Usuário (ID)'><input id='addUserPass' placeholder='Senha'><input id='addUserUrl' placeholder='URL (opcional)'><select id='addUserStatus'><option value='liberado'>liberado</option><option value='bloqueado'>bloqueado</option></select><button class='btn' type='submit'>Salvar 30d</button></form></div>
<div class='card'><h3>Criar Teste 1h</h3><form id='createTrialForm'><input id='trialUser' placeholder='Usuário Teste'><input id='trialPass' placeholder='Senha Teste'><button class='btn' type='submit'>Criar Teste 1h</button></form></div>
<div class='card'><h3>Lista de usuários</h3><div id='userList'>Carregando...</div></div>
<div style='text-align:center;margin-top:12px'><button id='logoutBtn' class='btn'>Sair</button></div></main>
<script src='https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js'></script>
<script src='https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js'></script>
<script>var firebaseConfig = {"apiKey": "AIzaSyA7899IaZqcyAV2MPfwAM3Ju64UEzU4RNI", "authDomain": "rrfilmes-fad2a.firebaseapp.com", "databaseURL": "https://rrfilmes-fad2a-default-rtdb.firebaseio.com", "projectId": "rrfilmes-fad2a", "storageBucket": "rrfilmes-fad2a.firebasestorage.app", "messagingSenderId": "1060629183423", "appId": "1:1060629183423:web:0b977a3f995b8c65ff7f0a", "measurementId": "G-2NZD2JSSQQ"};firebase.initializeApp(firebaseConfig);var db=firebase.database();if(!sessionStorage.getItem('rfilmes_admin')){alert('Acesso negado');window.location='index.html';}
db.ref('usuarios').on('value', function(snapshot){var obj=snapshot.val()||{};var keys=Object.keys(obj);var out='';if(keys.length===0){out='<p>Nenhum usuário.</p>';}keys.forEach(function(k){var u=obj[k];out+='<div class="user-row"><div><strong>'+k+'</strong> - '+(u.status||'')+' - expira: '+(u.expira||'N/A')+'</div><div><button class="btn small" onclick="liberar(\''+k+'\')">Liberar</button><button class="btn small" onclick="bloquear(\''+k+'\')">Bloquear</button><button class="btn small" onclick="excluir(\''+k+'\')">Excluir</button></div></div>';});document.getElementById('userList').innerHTML=out;}, function(err){document.getElementById('userList').innerText='Erro';});
document.getElementById('addUserForm').addEventListener('submit', function(e){e.preventDefault();var id=document.getElementById('addUserId').value.trim();var pass=document.getElementById('addUserPass').value.trim();var url=document.getElementById('addUserUrl').value.trim()||'';var status=document.getElementById('addUserStatus').value;var exp=new Date();exp.setDate(exp.getDate()+30);db.ref('usuarios/'+id).set({senha:pass,status:status,expira:exp.toISOString(),url:url}).then(function(){alert('Salvo');document.getElementById('addUserForm').reset();}).catch(function(err){console.error(err);alert('Erro');});});
document.getElementById('createTrialForm').addEventListener('submit', function(e){e.preventDefault();var id=document.getElementById('trialUser').value.trim();var pass=document.getElementById('trialPass').value.trim();var exp=new Date(Date.now()+60*60*1000);db.ref('usuarios/'+id).set({senha:pass,status:'liberado',expira:exp.toISOString(),url:''}).then(function(){alert('Teste criado');document.getElementById('createTrialForm').reset();}).catch(function(err){console.error(err);alert('Erro');});});
window.liberar=function(id){db.ref('usuarios/'+id).update({status:'liberado'})};window.bloquear=function(id){db.ref('usuarios/'+id).update({status:'bloqueado'})};window.excluir=function(id){if(confirm('Confirma?'))db.ref('usuarios/'+id).remove()};document.getElementById('logoutBtn').addEventListener('click', function(){sessionStorage.removeItem('rfilmes_admin');window.location='index.html'});
</script></body></html>